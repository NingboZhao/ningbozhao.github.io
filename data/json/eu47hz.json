{
  "body_html": "<p>Mysql中判断一个点是否落在多边形内</p><p><br /></p><p>关于地理空间数据，经常需要处理两个空间数据的关联关系。有很多种方法可以处理，通过编写程序算法，或者是调用<a href=\"https://www.2cto.com/database/\" target=\"_blank\">数据库</a>中对应的function。在my<a href=\"https://www.2cto.com/database/\" target=\"_blank\">sql数据库</a>中，https://dev.<a href=\"https://www.2cto.com/database/MySQL/\" target=\"_blank\">mysql</a>.com/doc/refman/5.1/en/functions-for-testing-spatial-relations-between-geometric-objects.html做了详细的介绍，但是它没有以具体的工程实践为例，本文以判断一个点是否落在多边形内的主题，加以简单的扩展。</p><p><br /></p><p>首先，建立一张简单的地理数据表</p><pre data-lang=\"sql\"><code>CREATE TABLE `ci_special_zone` \n(\n`id` int(11) NOT NULL auto_increment,\n`ploygongeo` text NOT NULL,\nPRIMARY KEY (`id`)\n)\nENGINE = MyISAM\nDEFAULT CHARSET = utf8</code></pre><p><br /></p><p>并插入几条数据</p><pre data-lang=\"sql\"><code>INSERT INTO ci_special_zone (ploygongeo) VALUES('POLYGON((113.547 22.186,113.549 22.186,113.549 22.188, 113.547 22.188,113.547 22.186))');  \nINSERT INTO ci_special_zone (ploygongeo) VALUES('POLYGON((112.547 21.186,112.549 212.186,112.549 21.188, 112.547 212.188,112.547 21.186))');</code></pre><p><br /></p><p>最后，执行如下的sql语句。</p><p>坐标点113.547 22.186是经纬度，若有返回值，则表示坐标点落在所在的区间。</p><pre data-lang=\"sql\"><code>SELECT substring(ploygongeo,10,length(ploygongeo)-11) from ci_special_zone\nwhere\nMBRContains(PolygonFromText(ploygongeo),\nPolygonFromText('Point(113.547 22.186)'))&gt;0 limit 0,1</code></pre><p><br /></p>",
  "slug": 580936,
  "title": "MySQL 点面包含"
}