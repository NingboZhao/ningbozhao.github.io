{
  "body_html": "<table class=\"lake-table\" style=\"width: 718px;\"><colgroup><col width=\"141\"></col><col width=\"576\"></col></colgroup><tbody><tr><td><p><span>读取</span><span> excel/csv</span></p></td><td><p><em># 读取 excel csv</em><span style=\"color: #333333;\">\n    data </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">\n  pd</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">read_csv(</span><span style=\"color: #BA2121;\">'/Users/ning/dataset/ops_brain.csv'</span><span style=\"color: #333333;\">, low_memory</span><span style=\"color: #666666;\">=</span><span style=\"color: green;\">False</span><span style=\"color: #333333;\">)</span></p></td></tr><tr><td><p>某列设为日期格式</p></td><td><p><em># 设置一列为日期格式</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">report_date\n  </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> pd</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">to_datetime(data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">report_date)</span></p></td></tr><tr><td><p>筛选字段</p></td><td><p><em># 筛选列</em><span style=\"color: #333333;\">\n    a </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">\n  data[[</span><span style=\"color: #BA2121;\">'report_date'</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">'citycode'</span><span style=\"color: #333333;\">]]</span></p></td></tr><tr><td><p> </p></td><td><p><em># 单条件筛选</em><span style=\"color: #333333;\">\n    b </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">\n  data[data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">report_date</span><span style=\"color: #666666;\">==</span><span style=\"color: #BA2121;\">'2019-04-01'</span><span style=\"color: #333333;\">]</span></p></td></tr><tr><td><p> </p></td><td><p><em># 多条件筛选</em><span style=\"color: #333333;\">\n    b </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">\n  data[(data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">report_date</span><span style=\"color: #666666;\">==</span><span style=\"color: #BA2121;\">'2019-04-01'</span><span style=\"color: #333333;\">) </span><span style=\"color: #666666;\">&amp;</span><span style=\"color: #333333;\"> (data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">citycode </span><span style=\"color: #666666;\">== </span><span style=\"color: #BA2121;\">'MBK_86'</span><span style=\"color: #333333;\">)]</span></p></td></tr><tr><td><p> </p></td><td><p><em># 新增字段</em><em> </em><em>及</em><em> </em><em>单一内容填充</em><span style=\"color: #333333;\">\n    a </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> data[[</span><span style=\"color: #BA2121;\">'report_date'</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">'citycode'</span><span style=\"color: #333333;\">]]<br />\n    a[</span><span style=\"color: #BA2121;\">&quot;sex&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">= </span><span style=\"color: #BA2121;\">&quot;male&quot;</span></p><p><em># 新增字段 及 逐行内容填充</em><span style=\"color: #333333;\">\n    a[</span><span style=\"color: #BA2121;\">&quot;sex&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> [</span><span style=\"color: #BA2121;\">&quot;male&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot;male&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot;female&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot;male&quot;</span><span style=\"color: #333333;\">]</span></p></td></tr><tr><td><p> </p></td><td><p><em># 计算/逻辑判断等方式添加字段</em><span style=\"color: #333333;\">\n    </span><strong>import </strong><strong>numpy </strong><strong>as </strong><strong>np</strong><span style=\"color: #333333;\">\n    a[</span><span style=\"color: #BA2121;\">&quot;a1&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">rides </span><span style=\"color: #666666;\">+ 1</span><span style=\"color: #333333;\">\n    a[</span><span style=\"color: #BA2121;\">&quot;a2&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">rides </span><span style=\"color: #666666;\">* 100</span><span style=\"color: #333333;\">\n    a[</span><span style=\"color: #BA2121;\">&quot;a3&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> np</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">where(a[</span><span style=\"color: #BA2121;\">&quot;sex&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">== </span><span style=\"color: #BA2121;\">&quot;male&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #666666;\">1</span><span style=\"color: #333333;\">, </span><span style=\"color: #666666;\">0</span><span style=\"color: #333333;\">)<br />\n    a</span></p></td></tr><tr><td><p> </p></td><td><p><em># 删除字段：pop 方法</em><span style=\"color: #333333;\">\n    a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">pop(</span><span style=\"color: #BA2121;\">&quot;sex&quot;</span><span style=\"color: #333333;\">)<br />\n    a</span></p></td></tr><tr><td><p>查看信息</p></td><td><p><span style=\"color: #333333;\">data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">info() </span><em>#查看基本信息</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">head(</span><span style=\"color: #666666;\">10</span><span style=\"color: #333333;\">) </span><em># 查看前10行</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">shape\n  </span><em># 查看几行几列</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">T\n  </span><em># 转置</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">values\n  </span><em># 返回一个 array</em></p></td></tr><tr><td><p>描述与统计</p></td><td><p><span style=\"color: #333333;\">data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">age</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">max() </span><em>#\n  最大值</em><span style=\"color: #333333;\">\n    </span><span style=\"color: green;\">min </span><em># 最小值</em><span style=\"color: #333333;\">\n    mean </span><em># 平均值</em><span style=\"color: #333333;\">\n    quantile </span><em># 中位数</em><span style=\"color: #333333;\">\n    </span><span style=\"color: green;\">sum </span><em>#求和</em></p><p><span style=\"color: #333333;\">data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">describe() </span><em>#\n  会显示出数字类型的列的统计指标：总数、平均数、标准差、最小值、最大值、25%/50%/75% 分位数</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">describe(include</span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">[</span><span style=\"color: #BA2121;\">&quot;object&quot;</span><span style=\"color: #333333;\">] )\n  </span><em>#\n  会显示出非数字类型的列的统计指标：总数，去重后的个数、最常见的值、最常见的值的频数</em></p><p> </p><p><span style=\"color: #333333;\">a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">rides</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">value_counts() </span><em># 各个值出现次数</em></p></td></tr><tr><td><p>排序</p></td><td><p><span style=\"color: #333333;\">data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">sort_values(by</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">&quot;字段&quot;</span><span style=\"color: #333333;\">)  </span><em># 正序</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">sort_values(ascending</span><span style=\"color: #666666;\">=</span><span style=\"color: green;\">False</span><span style=\"color: #333333;\">, by</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">'字段'</span><span style=\"color: #333333;\">) </span><em># 倒序</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">sort_values(by</span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">[</span><span style=\"color: #BA2121;\">&quot;age&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot;city&quot;</span><span style=\"color: #333333;\">]) </span><em># 多字段排序</em></p><p><span style=\"color: #333333;\">a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">rides</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">nlargest(</span><span style=\"color: #666666;\">5</span><span style=\"color: #333333;\">) </span><em>#\n  最大的n个值</em><span style=\"color: #333333;\">\n    a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">rides</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">nsmallest(</span><span style=\"color: #666666;\">5</span><span style=\"color: #333333;\">) </span><em># 最小的n个值</em></p></td></tr><tr><td><p>转换数据类型</p></td><td><p><a href=\"https://www.yuque.com/7125messi/wydusr/okebzq\" target=\"_blank\">https://www.yuque.com/7125messi/wydusr/okebzq</a></p><p>data =\n  pd.DataFrame(data)</p><p><span class=\"lake-fontsize-9\">data.columns = ['A','B']</span><span class=\"lake-fontsize-10\"> </span><em># </em><em>转换为</em><em> dataframe并起名</em></p><p><span>data.rename(columns={'a':'A'})</span> <em># </em><em>只给某个字段重命名</em></p></td></tr><tr><td><p>缺失值</p></td><td><p><span style=\"color: #333333;\">过滤缺失值<br />\n    a[a</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">rides</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">notnull()] </span><em># 过滤某字段为 null 的值</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">dropna(axis</span><span style=\"color: #666666;\">=0</span><span style=\"color: #333333;\">, how</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">&quot;any&quot;</span><span style=\"color: #333333;\">) </span><em>#\n  一行数据只要有一个字段存在空值即删除</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">dropna(axis</span><span style=\"color: #666666;\">=0</span><span style=\"color: #333333;\">, how</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">&quot;all&quot;</span><span style=\"color: #333333;\">) </span><em>#\n  一行数据所有字段都为空值才删除</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">dropna(axis</span><span style=\"color: #666666;\">=0</span><span style=\"color: #333333;\">, how</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">&quot;any&quot;</span><span style=\"color: #333333;\">, subset</span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\">[</span><span style=\"color: #BA2121;\">&quot;city&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot;sex&quot;</span><span style=\"color: #333333;\">]) </span><em>#\n  一行数据中只要 city 或 sex 存在空值即删除</em></p><p><span style=\"color: #333333;\">填充缺失值<br />\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">age</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">fillna(</span><span style=\"color: #666666;\">0</span><span style=\"color: #333333;\">) </span><em># age 缺失都填 0</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">age</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">fillna(method</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">&quot;ffill&quot;</span><span style=\"color: #333333;\">) </span><em>#\n  age 缺失用前一列填充</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">age</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">fillna(method</span><span style=\"color: #666666;\">=</span><span style=\"color: #BA2121;\">&quot;backfill&quot;</span><span style=\"color: #333333;\">) </span><em>#\n  age 缺失用后一列填充</em><span style=\"color: #333333;\">\n    data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">age</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">interpolate() </span><em># 使用线性差值来填充</em></p></td></tr><tr><td><p>替换</p></td><td><p><span style=\"color: #333333;\">data</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">age</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">replace(</span><span style=\"color: #666666;\">40</span><span style=\"color: #333333;\">, np</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">nan) </span><em>#\n  把 40 替换成空值</em><span style=\"color: #333333;\">\n    user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">city</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">replace(</span><span style=\"color: #BA2121;\">r'\\s+'</span><span style=\"color: #333333;\">, np</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">nan, regex</span><span style=\"color: #666666;\">=</span><span style=\"color: green;\">True</span><span style=\"color: #333333;\">) </span><em># 正则表达式，空白字符串替换成空值</em></p></td></tr><tr><td><p>文本数据处理</p></td><td><p><em># 将出生日期转为时间戳</em><span style=\"color: #333333;\">\n    user_info[</span><span style=\"color: #BA2121;\">&quot;birth&quot;</span><span style=\"color: #333333;\">] </span><span style=\"color: #666666;\">=</span><span style=\"color: #333333;\"> pd</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">to_datetime(user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">birth)<br />\n    </span><em># 将文本转为小写</em><span style=\"color: #333333;\">\n    user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">city</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">str</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">lower()<br />\n    </span><em># 统计每个字符串的长度</em><span style=\"color: #333333;\">\n    user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">city</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">str</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">len()<br />\n    </span><em># 将空字符串替换成下划线</em><span style=\"color: #333333;\">\n    user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">city</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">str</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">replace(</span><span style=\"color: #BA2121;\">&quot;\n  &quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot;_&quot;</span><span style=\"color: #333333;\">)<br />\n    </span><em>#\n  将所有开头为 S 的城市替换为空字符串</em><span style=\"color: #333333;\">\n    user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">city</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">str</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">replace(</span><span style=\"color: #BA2121;\">&quot;^S.*&quot;</span><span style=\"color: #333333;\">, </span><span style=\"color: #BA2121;\">&quot; &quot;</span><span style=\"color: #333333;\">)<br />\n    </span><em># 根据空字符串来分割某一列</em><span style=\"color: #333333;\">\n    user_info</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">city</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">str</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">split(</span><span style=\"color: #BA2121;\">&quot; &quot;</span><span style=\"color: #333333;\">, expand</span><span style=\"color: #666666;\">=</span><span style=\"color: green;\">True</span><span style=\"color: #333333;\">)<br />\n    </span><em># 提取子串</em><span style=\"color: #333333;\">\n    </span><a href=\"https://www.yuque.com/7125messi/wydusr/gcfef9\" target=\"_blank\"><span style=\"color: #333333;\">https:</span><span style=\"color: #666666;\">//</span><span style=\"color: #333333;\">www</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">yuque</span><span style=\"color: #666666;\">.</span><span style=\"color: #333333;\">com</span><span style=\"color: #666666;\">/7125</span><span style=\"color: #333333;\">messi</span><span style=\"color: #666666;\">/</span><span style=\"color: #333333;\">wydusr</span><span style=\"color: #666666;\">/</span><span style=\"color: #333333;\">gcfef9</span></a></p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr><tr><td><p> </p></td><td><p> </p></td></tr></tbody></table><p><br /></p>",
  "slug": 1687745,
  "title": "Pandas 基础操作"
}